soccer_scrape = function(start, limit){
   suppressMessages(library(httr))
   suppressMessages(library(XML))
   suppressMessages(library(data.table))
   suppressMessages(library(caroline))
   v_url = rep(NA, length(start:limit))
   v_get = rep(list(matrix(NA, ncol = 3, nrow = 20)), length(start:limit))
   #v_get_all = rep(list(matrix(NA, ncol = 3, nrow = 20)), length(start:limit))
   v_get_2 = rep(list(matrix(NA, ncol = 3, nrow = 20)), length(start:limit))
   v_name = rep(list(matrix(NA, ncol = 1, nrow = 20)), length(start:limit))
   v_name_2 = rep(list(matrix(NA, ncol = 1, nrow = 40)), length(start:limit))
   #v_name_all = rep(list(matrix(NA, ncol = 1, nrow = 40)), length(start:limit))
   v_player_list = rep(list(matrix(NA, ncol = 2, nrow = 50)), length(start:limit))
   v_player_list_perf = rep(list(matrix(NA, ncol = 18, nrow = 50)), length(start:limit))
   url_default = 'http://www.transfermarkt.com/silvio-adzic/profil/spieler/1'
   url_default_2 = 'http://www.transfermarkt.com/charles-grech/leistungsdatendetails/spieler/300005/saison//verein/0/liga/0/wettbewerb//pos/0/trainer_id/0/plus/1'
   v_url = paste("http://www.transfermarkt.com/anthony-martial/profil/spieler/",start:limit,sep = "")
   v_url_2 = paste("http://www.transfermarkt.com/charles-grech/leistungsdatendetails/spieler/", start:limit,"/saison//verein/0/liga/0/wettbewerb//pos/0/trainer_id/0/plus/1",sep = "")
   for(i in 1:length(start:limit)){
      v_get[[i]] = GET(v_url[i])
      v_get_2[[i]] = GET(v_url_2[i])
      #v_get_all = GET(v_url[i])
      if(v_get[[i]][1] == "http://www.transfermarkt.com/spieler-statistik/wertvollstespieler/marktwertetop"){
         v_get[[i]] = GET(url_default)
      }
      if(v_get_2[[i]][1] == "http://www.transfermarkt.com/spieler-statistik/wertvollstespieler/marktwertetop"){	
         v_get_2[[i]] = GET(url_default_2)
      }
      if(length(readHTMLTable(rawToChar(v_get[[i]]$content), stringsAsFactors = F)) < 2){
         v_get[[i]] = GET(url_default)
      }
      if(length(readHTMLTable(rawToChar(v_get_2[[i]]$content), stringsAsFactors = F)) < 2){
         v_get_2[[i]] = GET(url_default_2)
      }
      v_player_list[[i]] = readHTMLTable(rawToChar(v_get[[i]]$content), stringsAsFactors = F)[[1]]
      v_player_list_perf[[i]] = readHTMLTable(rawToChar(v_get_2[[i]]$content), stringsAsFactors = F)[[2]]
      names(v_player_list[[i]]) = c('v1','v2')
      names(v_player_list_perf[[i]]) = c('v1','v2','v3','v4','v5','v6','v7','v8','v9','v10','v11','v12','v13','v14','v15','v16','v17')
      v_name[[i]] = data.frame(rep(as.character(unlist(v_get[[i]][1])), nrow(v_player_list[[i]])))
      v_name_2[[i]] = data.frame(rep(as.character(unlist(v_get[[i]][1])), nrow(v_player_list_perf[[i]])))
      #v_name_all[[i]] = data.frame(rep(as.character(unlist(v_get_all[[i]][1])), nrow(v_player_list[[i]])))
   }
   v_players = rbindlist(v_player_list, fill = T)
   v_players_perf = rbindlist(v_player_list_perf, fill = T)
   v_names_players_perf = rbindlist(v_name_2, fill = T)
   v_names_players = rbindlist(v_name, fill = T)
   v_players_all = cbind(v_players,v_names_players)
   v_players_perf = cbind(v_players_perf,v_names_players_perf)
   v_players_perf_file_name = paste("v_players_perf_",start,"_",limit,".txt", sep = "")
   v_players_all_file_name = paste("v_players_all_",start,"_",limit,".txt", sep = "")
   write.delim(v_players_perf,v_players_perf_file_name, sep = "~")   
   write.delim(v_players_all,v_players_all_file_name, sep = "~")
}
system.time(soccer_scrape(10001,10500))
system.time(soccer_scrape(10501,11000))
system.time(soccer_scrape(11001,11500))
system.time(soccer_scrape(11501,12000))
system.time(soccer_scrape(12001,12500))
system.time(soccer_scrape(12501,13000))
system.time(soccer_scrape(13001,13500))
system.time(soccer_scrape(13501,14000))
system.time(soccer_scrape(14001,14500))
system.time(soccer_scrape(14501,15000))
system.time(soccer_scrape(15001,15500))
system.time(soccer_scrape(15501,16000))
system.time(soccer_scrape(16001,16500))
system.time(soccer_scrape(16501,17000))
system.time(soccer_scrape(17001,17500))
system.time(soccer_scrape(17501,18000))
system.time(soccer_scrape(18001,18500))
system.time(soccer_scrape(18501,19000))
system.time(soccer_scrape(19001,19500))
system.time(soccer_scrape(19501,20000))
######################################
system.time(soccer_scrape(20001,20500))
system.time(soccer_scrape(20501,21000))
system.time(soccer_scrape(21001,21500))
system.time(soccer_scrape(21501,22000))
system.time(soccer_scrape(22001,22500))
system.time(soccer_scrape(22501,23000))
system.time(soccer_scrape(23001,23500))
system.time(soccer_scrape(23501,24000))
system.time(soccer_scrape(24001,24500))
system.time(soccer_scrape(24501,25000))
system.time(soccer_scrape(25001,25500))
system.time(soccer_scrape(25501,26000)) 
system.time(soccer_scrape(26001,26500))
system.time(soccer_scrape(26501,27000))
system.time(soccer_scrape(27001,27500))
system.time(soccer_scrape(27501,28000))
system.time(soccer_scrape(28001,28500))
system.time(soccer_scrape(28501,29000))
system.time(soccer_scrape(29001,29500))
system.time(soccer_scrape(29501,30000))
######################################
system.time(soccer_scrape(30001,30500))
system.time(soccer_scrape(30501,31000))
system.time(soccer_scrape(31001,31500))
system.time(soccer_scrape(31501,32000))
system.time(soccer_scrape(32001,32500))
system.time(soccer_scrape(32501,33000))
system.time(soccer_scrape(33001,33500))
system.time(soccer_scrape(33501,34000))
system.time(soccer_scrape(34001,34500))
system.time(soccer_scrape(34501,35000))
system.time(soccer_scrape(35001,35500))
system.time(soccer_scrape(35501,36000))
system.time(soccer_scrape(36001,36500))
system.time(soccer_scrape(36501,37000))
system.time(soccer_scrape(37001,37500))
system.time(soccer_scrape(37501,38000))
system.time(soccer_scrape(38001,38500))
system.time(soccer_scrape(38501,39000))
system.time(soccer_scrape(39001,39500))
system.time(soccer_scrape(39501,40000))
######################################
system.time(soccer_scrape(40001,40500))
system.time(soccer_scrape(40501,41000))
system.time(soccer_scrape(41001,41500))
system.time(soccer_scrape(41501,42000))
system.time(soccer_scrape(42001,42500))
system.time(soccer_scrape(42501,43000))
system.time(soccer_scrape(43001,43500))
system.time(soccer_scrape(43501,44000))
system.time(soccer_scrape(44001,44500))
system.time(soccer_scrape(44501,45000))
system.time(soccer_scrape(45001,45500))
system.time(soccer_scrape(45501,46000))
system.time(soccer_scrape(46001,46500))
system.time(soccer_scrape(46501,47000))
system.time(soccer_scrape(47001,47500))
system.time(soccer_scrape(47501,48000))
system.time(soccer_scrape(48001,48500))
system.time(soccer_scrape(48501,49000))
system.time(soccer_scrape(49001,49500))
system.time(soccer_scrape(49501,50000))
######################################
system.time(soccer_scrape(50001,50500))
system.time(soccer_scrape(50501,51000))
system.time(soccer_scrape(51001,51500))
system.time(soccer_scrape(51501,52000))
system.time(soccer_scrape(52001,52500))
system.time(soccer_scrape(52501,53000))
system.time(soccer_scrape(53001,53500))
system.time(soccer_scrape(53501,54000))
system.time(soccer_scrape(54001,54500))
system.time(soccer_scrape(54501,55000))
system.time(soccer_scrape(55001,55500))
system.time(soccer_scrape(55501,56000))
system.time(soccer_scrape(56001,56500))
system.time(soccer_scrape(56501,57000))
system.time(soccer_scrape(57001,57500))
system.time(soccer_scrape(57501,58000))
system.time(soccer_scrape(58001,58500))
system.time(soccer_scrape(58501,59000))
system.time(soccer_scrape(59001,59500))
system.time(soccer_scrape(59501,60000))
######################################
system.time(soccer_scrape(60001,60500))
system.time(soccer_scrape(60501,61000))
system.time(soccer_scrape(61001,61500))
system.time(soccer_scrape(61501,62000))
system.time(soccer_scrape(62001,62500))
system.time(soccer_scrape(62501,63000))
system.time(soccer_scrape(63001,63500))
system.time(soccer_scrape(63501,64000))
system.time(soccer_scrape(64001,64500))
system.time(soccer_scrape(64501,65000))
system.time(soccer_scrape(65001,65500))
system.time(soccer_scrape(65501,66000))
system.time(soccer_scrape(66001,66500))
system.time(soccer_scrape(66501,67000))
system.time(soccer_scrape(67001,67500))
system.time(soccer_scrape(67501,68000))
system.time(soccer_scrape(68001,68500))
system.time(soccer_scrape(68501,69000))
system.time(soccer_scrape(69001,69500))
system.time(soccer_scrape(69501,70000))
######################################
system.time(soccer_scrape(70001,70500))
system.time(soccer_scrape(70501,71000))
system.time(soccer_scrape(71001,71500))
system.time(soccer_scrape(71501,72000))
system.time(soccer_scrape(72001,72500))
system.time(soccer_scrape(72501,73000))
system.time(soccer_scrape(73001,73500))
system.time(soccer_scrape(73501,74000))
system.time(soccer_scrape(74001,74500))
system.time(soccer_scrape(74501,75000))
system.time(soccer_scrape(75001,75500))
system.time(soccer_scrape(75501,76000))
system.time(soccer_scrape(76001,76500))
system.time(soccer_scrape(76501,77000))
system.time(soccer_scrape(77001,77500))
system.time(soccer_scrape(77501,78000))
system.time(soccer_scrape(78001,78500))
system.time(soccer_scrape(78501,79000))
system.time(soccer_scrape(79001,79500))
system.time(soccer_scrape(79501,80000))
######################################
system.time(soccer_scrape(80001,80500))
system.time(soccer_scrape(80501,81000))
system.time(soccer_scrape(81001,81500))
system.time(soccer_scrape(81501,82000))
system.time(soccer_scrape(82001,82500))
system.time(soccer_scrape(82501,83000))
system.time(soccer_scrape(83001,83500))
system.time(soccer_scrape(83501,84000))
system.time(soccer_scrape(84001,84500))
system.time(soccer_scrape(84501,85000))
system.time(soccer_scrape(85001,85500))
system.time(soccer_scrape(85501,86000))
system.time(soccer_scrape(86001,86500))
system.time(soccer_scrape(86501,87000))
system.time(soccer_scrape(87001,87500))
system.time(soccer_scrape(87501,88000))
system.time(soccer_scrape(88001,88500))
system.time(soccer_scrape(88501,89000))
system.time(soccer_scrape(89001,89500))
system.time(soccer_scrape(89501,90000))
######################################
system.time(soccer_scrape(90001,90500))
system.time(soccer_scrape(90501,91000))
system.time(soccer_scrape(91001,91500))
system.time(soccer_scrape(91501,92000))
system.time(soccer_scrape(92001,92500))
system.time(soccer_scrape(92501,93000))
system.time(soccer_scrape(93001,93500))
system.time(soccer_scrape(93501,94000))
system.time(soccer_scrape(94001,94500))
system.time(soccer_scrape(94501,95000))
system.time(soccer_scrape(95001,95500))
system.time(soccer_scrape(95501,96000))
system.time(soccer_scrape(96001,96500))
system.time(soccer_scrape(96501,97000))
system.time(soccer_scrape(97001,97500))
system.time(soccer_scrape(97501,98000))
system.time(soccer_scrape(98001,98500))
system.time(soccer_scrape(98501,99000))
system.time(soccer_scrape(99001,99500))
system.time(soccer_scrape(99501,100000))
######################################
system.time(soccer_scrape(110001,110500))
system.time(soccer_scrape(110501,111000))
system.time(soccer_scrape(111001,111500))
system.time(soccer_scrape(111501,112000))
system.time(soccer_scrape(112001,112500))
system.time(soccer_scrape(112501,113000))
system.time(soccer_scrape(113001,113500))
system.time(soccer_scrape(113501,114000))
system.time(soccer_scrape(114001,114500))
system.time(soccer_scrape(114501,115000))
system.time(soccer_scrape(115001,115500))
system.time(soccer_scrape(115501,116000))
system.time(soccer_scrape(116001,116500))
system.time(soccer_scrape(116501,117000))
system.time(soccer_scrape(117001,117500))
system.time(soccer_scrape(117501,118000))
system.time(soccer_scrape(118001,118500))#got up to here rm(list = ls())
system.time(soccer_scrape(118501,119000))
system.time(soccer_scrape(119001,119500))
system.time(soccer_scrape(119501,200000))
######################################
system.time(soccer_scrape(120001,120500))
system.time(soccer_scrape(120501,121000))
system.time(soccer_scrape(121001,121500))
system.time(soccer_scrape(121501,122000))
system.time(soccer_scrape(122001,122500))
system.time(soccer_scrape(122501,123000))
system.time(soccer_scrape(123001,123500))
system.time(soccer_scrape(123501,124000))
system.time(soccer_scrape(124001,124500))
system.time(soccer_scrape(124501,125000))
system.time(soccer_scrape(125001,125500))
system.time(soccer_scrape(125501,126000))
system.time(soccer_scrape(126001,126500))
system.time(soccer_scrape(126501,127000))
system.time(soccer_scrape(127001,127500))
system.time(soccer_scrape(127501,128000))
system.time(soccer_scrape(128001,128500))
system.time(soccer_scrape(128501,129000))
system.time(soccer_scrape(129001,129500))
system.time(soccer_scrape(129501,130000))
######################################
system.time(soccer_scrape(130001,130500))
system.time(soccer_scrape(130501,131000))
system.time(soccer_scrape(131001,131500))
system.time(soccer_scrape(131501,132000))
system.time(soccer_scrape(132001,132500))
system.time(soccer_scrape(132501,133000))
system.time(soccer_scrape(133001,133500))
system.time(soccer_scrape(133501,134000))
system.time(soccer_scrape(134001,134500))
system.time(soccer_scrape(134501,135000))
system.time(soccer_scrape(135001,135500))
system.time(soccer_scrape(135501,136000))
system.time(soccer_scrape(136001,136500))
system.time(soccer_scrape(136501,137000))
system.time(soccer_scrape(137001,137500))
system.time(soccer_scrape(137501,138000))
system.time(soccer_scrape(138001,138500))
system.time(soccer_scrape(138501,139000))
system.time(soccer_scrape(139001,139500))
system.time(soccer_scrape(139501,140000))
